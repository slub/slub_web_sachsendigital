<html data-namespace-typo3-fluid="true" lang="en" xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers">

<f:comment>
    <!--
     * (c) Kitodo. Key to digital objects e.V. <contact@kitodo.org>
     *
     * This file is part of the Kitodo and TYPO3 projects.
     *
     * @license GNU General Public License version 3 or later.
     * For the full copyright and license information, please read the
     * LICENSE.txt file that was distributed with this source code.
    -->
</f:comment>

<f:if condition="{sortableMetadata}">
    <f:variable name="currentPage" value="{widgetPage.currentPage - 1}"/>
    <f:variable name="pageOffset" value="{settings.list.paginate.itemsPerPage * currentPage}"/>
    <f:variable name="allDocuments" value="{documents -> f:count()}"/>
    <f:variable name="numDocuments" value="{pageOffset + settings.list.paginate.itemsPerPage}"/>

    <p class="tx-dlf-sortinfo">
        <f:translate
            arguments="{0:'{pageOffset + 1}', 1:'{f:if(condition: \'{numDocuments} > {allDocuments}\', then: \'{allDocuments}\', else: \'{numDocuments}\')}', 2:'{allDocuments}'}"
            key="listview.count"/>
    </p>

    <f:form action="{action}" class="tx-dlf-search-form" controller="{Controller}" method="post" name="searchParameter" section="showResults">
        <div>
            <label for="form-orderBy-{viewData.uniqueId}">
                <f:translate key="listview.form.orderBy"/>
            </label>
            <f:form.select id="form-orderBy-{viewData.uniqueId}" property="orderBy" value="{lastSearch.orderBy}">
                <f:form.select.option value="score">
                    <f:translate key="listview.form.relevance"/>
                </f:form.select.option>
                <f:for as="meta" each="{sortableMetadata}">
                    <f:form.select.option value="{meta.indexName}_sorting">
                        <f:translate key='LLL:EXT:dlf/Resources/Private/Language/locallang_metadata.xlf:metadata.{meta.indexName}'/>
                    </f:form.select.option>
                </f:for>
            </f:form.select>
            <label for="form-order-{viewData.uniqueId}">
                <f:translate key="listview.form.order"/>
            </label>
            <f:form.select id="form-order-{viewData.uniqueId}" property="order" value="{lastSearch.order}">
                <f:form.select.option value="asc">
                    <f:translate key='LLL:EXT:dlf/Resources/Private/Language/locallang.xlf:listview.form.order.asc'/>
                </f:form.select.option>
                <f:form.select.option value="desc">
                    <f:translate key='LLL:EXT:dlf/Resources/Private/Language/locallang.xlf:listview.form.order.desc'/>
                </f:form.select.option>

            </f:form.select>
            <f:form.hidden property="collection" value="{lastSearch.collection}"/>
            <f:form.hidden property="collections" value="{settings.collections}"/>
            <f:form.hidden property="query" value="{lastSearch.query}"/>
            <f:form.hidden property="fulltext" value="{lastSearch.fulltext}"/>
        </div>
    </f:form>
</f:if>

</html>
